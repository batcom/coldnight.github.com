<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Wood's Linux Zen</title><link href="http://www.linuxzen.com/" rel="alternate"></link><link href="http://www.linuxzen.com/feeds/Linux,%E7%9B%91%E6%8E%A7.atom.xml" rel="self"></link><id>http://www.linuxzen.com/</id><updated>2012-02-20T17:37:00+08:00</updated><entry><title>搭建ntop监测局域网内流量</title><link href="http://www.linuxzen.com/da-jian-ntopjian-ce-ju-yu-wang-nei-liu-liang.html" rel="alternate"></link><updated>2012-02-20T17:37:00+08:00</updated><author><name>Wood</name></author><id>tag:www.linuxzen.com,2012-02-20:da-jian-ntopjian-ce-ju-yu-wang-nei-liu-liang.html</id><summary type="html">&lt;p&gt;ntop是一种监控网络流量的工具，用ntop显示网络的使用情况比其他一些网管软件更加直观、详细。ntop甚至可以列出每个节点计算机的网络带宽利用率。ntop是一个灵活的、功能齐全的，用来监控和解决局域网问题的工具。它同时提供命令行输入和Web界面，可应用于嵌入式Web服务。&lt;/p&gt;
&lt;p&gt;本文环境:CentOS5.5 32位&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ip:192.168.3.101&lt;/li&gt;
&lt;li&gt;rrdtool:rrdtool-1.4.7.tar.gz&lt;/li&gt;
&lt;li&gt;GeoIP:GeoIP-1.4.8.tar.gz&lt;/li&gt;
&lt;li&gt;ntop:ntop-4.1.0.tar.gz&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;一.安装依赖:&lt;/h2&gt;
&lt;h3&gt;安装rrdtool&lt;/h3&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;yum -y install libxml2 glib-devel pango-devel
wget http://oss.oetiker.ch/rrdtool/pub/rrdtool-1.4.7.tar.gz                  &lt;span class="c"&gt;# 下载&lt;/span&gt;
tar -zxvf rrdtool-1.4.7.tar.gz
&lt;span class="nb"&gt;cd &lt;/span&gt;rrdtool-1.4.7
./configure &amp;amp;amp;&amp;amp;amp; make &amp;amp;amp;&amp;amp;amp; make install
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;安装geoip:&lt;/h3&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;wget http://geolite.maxmind.com/download/geoip/api/c/GeoIP-1.4.8.tar.gz
tar -zxvf GeoIP-1.4.8.tar.gz
&lt;span class="nb"&gt;cd &lt;/span&gt;GeoIP-1.4.8
./configure &amp;amp;amp;&amp;amp;amp; make &amp;amp;amp;&amp;amp;amp; make install
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;安装其余依赖:&lt;/h3&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;yum -y install libtool libpcap-devel gd-devel gdbm-devel openssl-devel
 intltool
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;h2&gt;二.下载安装:&lt;/h2&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;wget http://sourceforge.net/projects/ntop/files/ntop/Stable/ntop-4.1.0.tar.gz/download
tar -zxvf ntop-4.1.0.tar.gz
&lt;span class="nb"&gt;cd &lt;/span&gt;ntop-4.1.0
./autogen.sh --with-tcpwrap --with-rrd-home&lt;span class="o"&gt;=&lt;/span&gt;/opt/rrdtool-1.4.7/
make &amp;amp;amp;&amp;amp;amp; make install
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;三.配置启动&lt;/h2&gt;
&lt;p&gt;更改检测数据保存目录的权限:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;chown -R nobody /usr/local/var/ntop/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;创建admin管理密码:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;ntop -A
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;在eth0上启动ntop:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;ntop -d -i eth0 -M
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;客户端浏览监测结果:
在浏览器上输入:http://192.168.3.101:3000访问即可查看监测结果,Admin可以配置ntop.到此这个监控局域网流量的ntop就搭建完成,这样就可以很方便的查看局域网流量,可以发现是否有人在执行arp攻击等等常见攻击.剩余的功能大家就自己发现吧,这里不错介绍.&lt;/p&gt;
&lt;p&gt;如果英语阅读困难的话可以,有牛人已经做出来了中文版,大家可以下载安装.&lt;/p&gt;</summary><category term="监控"></category><category term="流量"></category><category term="局域网"></category><category term="ntop"></category><category term="Linux"></category></entry></feed>