<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Wood.D's Record</title><link href="http://www.linuxzen.com/" rel="alternate"></link><link href="http://www.linuxzen.com/feeds/Linux,shell.atom.xml" rel="self"></link><id>http://www.linuxzen.com/</id><updated>2012-02-20T11:30:00+08:00</updated><entry><title>Linux一些比较实用的小技巧</title><link href="http://www.linuxzen.com/linux-xie-bi-jiao-shi-yong-de-xiao-ji-qiao.html" rel="alternate"></link><updated>2012-02-20T11:30:00+08:00</updated><author><name>Wood.D</name></author><id>tag:www.linuxzen.com,2012-02-20:linux-xie-bi-jiao-shi-yong-de-xiao-ji-qiao.html</id><summary type="html">&lt;p&gt;在Linux中各种各样的小技巧可以帮助我们更好更快的完成我们的工作,下面就介绍一些我所知道的小技巧&lt;/p&gt;
&lt;h2&gt;文件查找&lt;/h2&gt;
&lt;p&gt;找出最近修改的文件:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;find / -ctime 1 &lt;span class="c"&gt;# 找出根下最近24小时修改过inode信息的文件(更改权限)&lt;/span&gt;
find / -mtime 1 &lt;span class="c"&gt;# 找出根下最近24小时修改过的文件(内容)&lt;/span&gt;
find / -atime 1 &lt;span class="c"&gt;# 找出根下最近24小时访问过的文件&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;使用通配符查找文件&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;find / -name &lt;span class="s2"&gt;&amp;quot;*.log&amp;quot;&lt;/span&gt; &lt;span class="c"&gt;# 找出根下以log为后缀的文件,这里必须要加双引号,不然会报错,因为找的是多个文件,需要用双引号引起来&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;文本替换&lt;/h2&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;sed -e &lt;span class="s1"&gt;&amp;#39;2s/ext3/ext4/&amp;#39;&lt;/span&gt; /etc/fstab &lt;span class="c"&gt;# 将第二行的ext3改成ext4&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;显示指定行&lt;/h2&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;sed -n &lt;span class="s2"&gt;&amp;quot;3p&amp;quot;&lt;/span&gt; /etc/fstab         &lt;span class="c"&gt;# 显示第3行&lt;/span&gt;
sed -n &lt;span class="s2"&gt;&amp;quot;3,5p&amp;quot;&lt;/span&gt; /etc/gfstab  &lt;span class="c"&gt;# 显示第3到5行&lt;/span&gt;
sed -n &lt;span class="s2"&gt;&amp;quot;3p;5p&amp;quot;&lt;/span&gt; /etc/fstab    &lt;span class="c"&gt;# 显示第3行和第5行&lt;/span&gt;
awk &lt;span class="s1"&gt;&amp;#39;NR==3&amp;#39;&lt;/span&gt; /etc/fstab     &lt;span class="c"&gt;# 显示第3行&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;在行首或行尾添加:&lt;/h2&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;sed -e &lt;span class="s1"&gt;&amp;#39;s/^/hello&amp;#39;&lt;/span&gt; &lt;span class="nb"&gt;test&lt;/span&gt; &lt;span class="c"&gt;# 在test文件的行首添加hello&lt;/span&gt;
sed -e &lt;span class="s1"&gt;&amp;#39;s/$/hello&amp;#39;&lt;/span&gt; &lt;span class="nb"&gt;test&lt;/span&gt; &lt;span class="c"&gt;# 在test文件的行尾添加hello&lt;/span&gt;
sed -e &lt;span class="s1"&gt;&amp;#39;3s/^/hello&amp;#39;&lt;/span&gt; &lt;span class="nb"&gt;test&lt;/span&gt; &lt;span class="c"&gt;# 在test文件的第3行行首添加hello&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;在vi里执行命令:&lt;/h2&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;vi /etc/sysconfig/networ-scripts/ifcfg-eth0
&lt;span class="c"&gt;# 打开vi,在末行模式下(ESC-&amp;amp;gt;:)&lt;/span&gt;

:r!cat /mnt/ip.txt           &lt;span class="c"&gt;# 在当前行的下面输入ip.txt的内容,r代表命令输出放到下一行,!后面是要执行的命令&lt;/span&gt;
:.!cat /mnt/ip.txt           &lt;span class="c"&gt;# 在当前行输入ip.txt的内容,.代表将命令输出放到当前航&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;执行上一条命令:&lt;/h2&gt;
&lt;p&gt;如果刚执行了一条server network restart,如果又做了一些操作,需要再次执行,按上键调处可以,还有更快捷的就是:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;!ser
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;!会在命令历史找与!后面匹配的最近一条命令.&lt;/p&gt;
&lt;h2&gt;通过ssh连接服务器上传下载文件:&lt;/h2&gt;
&lt;p&gt;当你通过ssh连接你的Linux的时候你想下载一个文件到本地,或者像把本地文件上传到远端,你想到用ftp吗?out了,当你通过ssh连接的时候Linux提供了两个命令 rz/sz,命令依赖于包lrzsz.rz命令可以将本地文件通过ssh上传到Linux上,sz pkg 可以将远端的pkg下载到本地.&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;yum -y install lrzsz           &lt;span class="c"&gt;# 安装&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;然后就可以通过rz/sz来上传下载文件,省去了文件服务器,也可更方便更快捷的管理你的服务器&lt;/p&gt;
&lt;h2&gt;windows文件转换为Linux格式的文件&lt;/h2&gt;
&lt;p&gt;windows的文件格式比Linux格式的文件多了一个回车符\r,可以通过命令来实现转换:
直接转换,dos2unix依赖于包dos2unix:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;dos2unix file.txt     &lt;span class="c"&gt;# 需要安装dos2unix包&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;通过删除\r来实现转换:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;tr -d &lt;span class="s1"&gt;&amp;#39;\r&amp;#39;&lt;/span&gt; file.txt &amp;amp;gt;&amp;amp;gt; file1.txt   &lt;span class="c"&gt;# 通过tr命令删除\r字符,并重定向追加到file1.txt&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="命令"></category><category term="sz"></category><category term="ssh上传下载"></category><category term="shell"></category><category term="sed"></category><category term="rz"></category><category term="lrzsz"></category><category term="Linux"></category><category term="find"></category><category term="awk"></category></entry><entry><title>Linux shell脚本调试技巧</title><link href="http://www.linuxzen.com/linux-shelljiao-ben-diao-shi-ji-qiao.html" rel="alternate"></link><updated>2012-01-17T17:04:00+08:00</updated><author><name>Wood.D</name></author><id>tag:www.linuxzen.com,2012-01-17:linux-shelljiao-ben-diao-shi-ji-qiao.html</id><summary type="html">&lt;p&gt;有时候shell脚本不会给予明显的调试信息,而且有时不报错,但是脚本没有达到预期的效果这时候脚本调试就可以帮你准确定位错误.&lt;/p&gt;
&lt;p&gt;在脚本的最顶部加上&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="nb"&gt;set&lt;/span&gt; -x
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;开启调试
在脚本的最底部加上&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="nb"&gt;set&lt;/span&gt; +x
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;关闭调试
如果在终端界面下,调试信息过多,调试信息是无法重定向到文件的,所以该怎样查看调试呢,当然这对SecureCRT连接的当然不是问题,但是如果是终端界面的话,可以使用命令&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;script
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;然后执行要捕捉内容的命令,完成后通过&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="nb"&gt;exit&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;退出,当前目录下会生成typescript,通过&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;more typescript
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;查看调试命令.&lt;/p&gt;</summary><category term="调试"></category><category term="技巧"></category><category term="shell"></category><category term="Linux"></category></entry></feed>